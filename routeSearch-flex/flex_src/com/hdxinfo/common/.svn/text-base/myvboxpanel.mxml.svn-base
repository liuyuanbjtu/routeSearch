<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
		 width="100%"
		 height="100%"
		 creationComplete="inite()"
		 xmlns:common="cn.com.common.*">
	<mx:Script>
		<![CDATA[
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.managers.CursorManager;

			[Bindable]
			public var str:String;
			[Bindable]
			public var fangan:String;
			[Bindable]
			public var fanganid:int;
			[Bindable]
			public var db1:ArrayCollection;
			[Bindable]
			public var butwidth:int;
			[Bindable]
			public var labtex:String;
			[Bindable]
			private var texlab:int=int(labtex) + 1;

			[Bindable]
			public var labeltext:String="方案" + texlab + ":";

			[Bindable]
			public var labelgwidth:int=340;

			public var index22:index;

			private function inite():void
			{

				//this.dategrid1.height= 200 ;
				//this.currentState="oth";
				fanganlab.mx_internal::getTextField().wordWrap=true;
				this.fanganlab.text=fangan;
			}
			private function clickHandler(i:int):void
			{

				if (this.currentState == "oth")
				{
					this.currentState=null;
				}
				else
				{
					this.currentState="oth";
				}
				// 注释掉 remote方法

				remote.findlandlist(i);
				CursorManager.setBusyCursor();
				var s:String=this.fanganid.toString();
				index22.gishandle(s);
			}

			// remote java 

			private function ResultHandleLandlist(event:ResultEvent):void
			{
				var arrland:ArrayCollection=event.result as ArrayCollection; // 得到 乘车的车站对象的集合
				db1=arrland;
				CursorManager.removeBusyCursor();

				//  固定一下 dategrid的 高度  使之没有滚动条
				var i1:int=this.db1.length; // 有多少行 
				var itemhei:int=this.dategrid1.rowHeight; //  每行的高度
				var len:int=(i1 + 2) * itemhei; //  总高度
				this.dategrid1.height=len; // 赋值
			}

			private function FaultHandleLandlist(event:FaultEvent):void
			{

			}
		]]>
	</mx:Script>

	<mx:RemoteObject id="remote"
					 destination="mywayremote">
		<mx:method name="findlandlist"
				   result="ResultHandleLandlist(event)"
				   fault="FaultHandleLandlist(event)"/>
	</mx:RemoteObject>
	<mx:states>
		<mx:State name="oth">
			<mx:SetProperty target="{fanganlab}"
							name="width"
							value="{labelgwidth}"/>
			<mx:SetProperty name="height"
							value="42"/>
			<mx:SetProperty target="{panel1}"
							name="height"
							value="36"/>
		</mx:State>
	</mx:states>
	<mx:Panel width="100%"
			  height="100%"
			  backgroundAlpha="0"
			  headerHeight="0"
			  paddingTop="0"
			  paddingBottom="0"
			  borderThicknessBottom="0"
			  borderThicknessLeft="0"
			  borderThicknessRight="0"
			  borderThicknessTop="3"
			  borderStyle="solid"
			  cornerRadius="15"
			  borderThickness="1"
			  borderColor="#0099CC"
			  backgroundColor="#A5B3BB"
			  dropShadowColor="#ffffff"
			  borderAlpha="0"
			  id="panel1">

		<mx:HBox width="100%"
				 height="36">
			<mx:Label text="{int(this.id)+1}"
					  color="red"
					  click="clickHandler(fanganid)"/>
			<mx:Label height="100%"
					  color="black"
					  id="fanganlab"
					  width="{butwidth}"
					  click="clickHandler(fanganid)"/>
		</mx:HBox>
		<mx:DataGrid dataProvider="{db1}"
					 id="dategrid1"
					 sortableColumns="false"
					 width="100%"
					 textAlign="center"
					 rollOverColor="#FFCC33"
					 selectionColor="#FFCC33">
			<mx:columns>
				<mx:DataGridColumn dataField="land"
								   textAlign="left"
								   headerText="途经车站(到站时间-出站时间)"/>
			</mx:columns>
		</mx:DataGrid>
	</mx:Panel>
	<!--
		 <mx:Label id="dd" text="{str}"/>
	-->

</mx:VBox>
